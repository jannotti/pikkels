import * as firebase from 'firebase'

class Foop {
  constructor(key) {
    this.foop = {
      key: key,
      ref: firebase.database().ref(key),
      read: false,
    };
    console.log("ref", this.foop.ref);
    this.foop.ref.on('value', snap => {
      this.hydrate(snap.val());
      this.foop.read = true;
    });
  }

  save() {
    if (!this.foop.read) {
      console.log("Can't save, since haven't read.");
      return;
    }
    const json = this.dehydrated();
    delete json.foop;
    console.log(json);
    this.foop.ref.set(json);
  }
}
export default Foop;
